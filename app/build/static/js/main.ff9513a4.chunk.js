(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(35),c=n.n(a),i=n(18),s=n(3),u=n(53),p=n(54),l=n(23),f=function(e){return{type:"CONSOLE_OUTPUT",payload:{consoleOut:e}}},m=function(){return function(e,t){return e({type:"CONSOLE_TOGGLE",payload:{consoleOpen:!t().pythesis.consoleOpen}})}},d=function(){return function(e,t){fetch("".concat("http://127.0.0.1:5000","/config")).then(function(e){return e.json()}).then(function(t){return e({type:"QUERY_CONFIG",payload:{config:t}})})}},h=function(e){return function(t,n){var o=n().pythesis,r=o.pageNumber+e;if(r>0&&r<=o.numPages)return t({type:"TRANSLATE_PAGES",payload:{pageNumber:r}})}},O=function(e){return function(t,n){return t({type:"SET_NUM_PAGES",payload:{numPages:e}})}},b=function(e){return function(t,n){var o=n().pythesis.zoom+e;if(o>=.5&&o<=5)return t({type:"TRANSLATE_ZOOM",payload:{zoom:o}})}};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E={consoleOut:"PyThesis v1.0",numPages:1,config:null,args:null,pageNumber:1,timestamp:Date.now(),zoom:1,uri:"",selectedProject:0,consoleOpen:!1,pdfPath:"build/document.pdf"},j=n(55),v=Object(s.combineReducers)({pythesis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONSOLE_OUTPUT":return g({},e,{consoleOut:t.payload.consoleOut});case"CONSOLE_TOGGLE":return g({},e,{consoleOpen:t.payload.consoleOpen});case"QUERY_CONFIG":return g({},e,{config:t.payload.config});case"QUERY_ARGS":return g({},e,{args:t.payload.args});case"BUILD":return g({},e,{uri:t.payload.uri});case"TRANSLATE_PAGES":case"SET_PAGE_NUMBER":return g({},e,{pageNumber:t.payload.pageNumber});case"SET_NUM_PAGES":return g({},e,{numPages:t.payload.numPages});case"TRANSLATE_ZOOM":return g({},e,{zoom:t.payload.zoom});case"RELOAD":return g({},e,{uri:t.payload.uri});default:return e}}}),w=Object(s.createStore)(v,Object(p.composeWithDevTools)(Object(s.applyMiddleware)(u.a,j.logger))),P=(n(66),n(24)),N=n(25),k=n(27),R=n(26),S=n(28),D=n(36),C=n(30),T=n(56),_=n.n(T),A=(n(113),n(19)),L=n(20);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}C.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(C.pdfjs.version,"/pdf.worker.js");var U=function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(k.a)(this,Object(R.a)(t).call(this,e))).onDocumentLoadSuccess=function(e){var t=e.numPages;n.props.dispatch(O(t))},n.state={timestamp:Date.now(),buildResult:"",loading:!1,output:"PyThesis - A LaTeX Transpiler"},n.zoomIncrement=.02,n.viewerRef=r.a.createRef(),n.documentRef=r.a.createRef(),n.pageNumberRef=r.a.createRef(),n}return Object(S.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.viewerRef.current.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"PdfViewer",ref:this.viewerRef,tabIndex:"1",onKeyDown:function(t){e.handleKeyDown(t)}},r.a.createElement("div",{className:"document-container"},this.document()),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:function(t){e.props.dispatch(h(-1))}},r.a.createElement(A.a,{icon:L.a})),r.a.createElement("button",{onClick:function(t){e.props.dispatch(h(1))}},r.a.createElement(A.a,{icon:L.b})),r.a.createElement("button",{onClick:function(t){e.fullBuild()}},r.a.createElement(A.a,{icon:L.c})),r.a.createElement("button",{onClick:function(t){e.setState({timestamp:Date.now()})}},r.a.createElement(A.a,{icon:L.f})),r.a.createElement("button",{onClick:function(t){e.props.dispatch(b(e.zoomIncrement))}},r.a.createElement(A.a,{icon:L.e})),r.a.createElement("button",{onClick:function(t){e.props.dispatch(b(-e.zoomIncrement))}},r.a.createElement(A.a,{icon:L.d})),r.a.createElement("button",{onClick:function(t){e.props.dispatch(function(e,t){return e({type:"CONSOLE_TOGGLE",payload:{consoleOpen:!t().pythesis.consoleOpen}})})}},r.a.createElement(A.a,{icon:L.g}))),r.a.createElement("div",{className:"jump-to"},r.a.createElement("span",{className:"label"},"Jump to page:"),r.a.createElement("input",{type:"text",ref:this.pageNumberRef,onClick:function(t){e.pageNumberRef.current.value=""},onKeyPress:function(t){if(t.stopPropagation(),13==t.charCode){var n=parseInt(e.pageNumberRef.current.value);e.props.dispatch(function(e){return function(t,n){var o=n().pythesis;if(e>0&&e<o.numPages)return t({type:"SET_PAGE_NUMBER",payload:{pageNumber:e}})}}(n)),e.pageNumberRef.current.value=""}}})),r.a.createElement("div",{className:"page"},"Page ",this.props.pythesis.pageNumber," of ",this.props.pythesis.numPages),r.a.createElement("img",{className:"loading",src:_.a,style:this.state.loading?{display:"block"}:{display:"none"}}))}},{key:"document",value:function(){var e=600;this.viewerRef.current&&(e=.4*this.viewerRef.current.clientWidth),e*=this.props.pythesis.zoom;this.props.pythesis.selectedProject;var t="".concat("http://127.0.0.1:5000","/pdf?timestamp=").concat(this.state.timestamp);return r.a.createElement("div",{className:"document",style:{width:e},ref:this.documentRef},r.a.createElement(C.Document,{file:t,onLoadSuccess:this.onDocumentLoadSuccess},r.a.createElement(C.Page,{pageNumber:this.props.pythesis.pageNumber,size:"A4",wrap:!1,width:e})))}},{key:"fullBuild",value:function(){this.build("".concat("http://127.0.0.1:5000","/full_build"))}},{key:"partialBuild",value:function(){this.build("".concat("http://127.0.0.1:5000","/partial_build"))}},{key:"partialExecute",value:function(){this.build("".concat("http://127.0.0.1:5000","/partial_execute"))}},{key:"build",value:function(e){var t=this;this.setState({loading:!0,output:"Building document ..."}),fetch(e).then(function(e){e.text().then(function(e){t.setState({timestamp:Date.now(),loading:!1}),t.props.dispatch(f(e))})}).catch(function(e){t.setState({output:e,loading:!1})})}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case 39:this.props.dispatch(h(1));break;case 37:this.props.dispatch(h(-1));break;case 107:this.props.dispatch(b(this.zoomIncrement));break;case 109:this.props.dispatch(b(-this.zoomIncrement));break;case 82:this.setState({timestamp:Date.now()});break;case 66:this.fullBuild();break;case 80:this.partialBuild();break;case 69:this.partialExecute()}}}]),t}(r.a.Component),x=Object(i.b)(function(e){return z({},e,{pythesis:e.pythesis})},function(e){return z({},Object(s.bindActionCreators)({consoleOut:f,consoleToggle:m,translatePages:h,translateZoom:b,setNumPages:O}),{dispatch:e})})(U),I=(n(116),function(e){function t(e){var n;return Object(P.a)(this,t),(n=Object(k.a)(this,Object(R.a)(t).call(this,e))).consoleRef=r.a.createRef(),n}return Object(S.a)(t,e),Object(N.a)(t,[{key:"componentDidUpdate",value:function(){this.consoleRef.current.scrollIntoView(!1)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Console"},r.a.createElement("div",{className:"output",ref:this.consoleRef},this.props.out))}}]),t}(o.Component)),B=Object(i.b)(function(e){return{consoleOut:e.pythesis.consoleOut}})(I);n(117);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}var K=function(e){function t(e){return Object(P.a)(this,t),Object(k.a)(this,Object(R.a)(t).call(this,e))}return Object(S.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(d())}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.components())}},{key:"components",value:function(){return console.log("Props: "),console.log(this.props),this.props.consoleOpen?r.a.createElement(D.Resize,{handleWidth:"5px",handleColor:"#fff"},r.a.createElement(D.ResizeVertical,{height:"80%",minHeight:"20px"},r.a.createElement(x,null)),r.a.createElement(D.ResizeVertical,{height:"160px",minHeight:"20px"},r.a.createElement(B,null))):r.a.createElement(x,null)}}]),t}(o.Component),V=Object(i.b)(function(e){return{consoleOpen:e.pythesis.consoleOpen}},function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(s.bindActionCreators)({queryConfig:d}),{dispatch:e})})(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{store:w},r.a.createElement(V,null)),document.getElementById("root"))},32:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=32},56:function(e,t,n){e.exports=n.p+"static/media/loading.52e316e7.svg"},57:function(e,t,n){e.exports=n(118)},66:function(e,t,n){},74:function(e,t){},76:function(e,t){},77:function(e,t){},78:function(e,t){},79:function(e,t){}},[[57,1,2]]]);
//# sourceMappingURL=main.ff9513a4.chunk.js.map