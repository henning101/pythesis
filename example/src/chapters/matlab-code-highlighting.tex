{% raw %}

% Custom colors
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{gray}{rgb}{0.4, 0.4, 0.4}

% MATLAB style for highlighting
\newcommand\matlabstyle{\lstset{
    language=MATLAB,%
    basicstyle=\footnotesize\ttfamily,
    morekeywords={matlab2tikz},
    keywordstyle=\color{deepblue},%
    morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},
    identifierstyle=\color{black},%
    stringstyle=\color{deepgreen},
    commentstyle=\color{gray},%
    showstringspaces=false,%without this there will be a symbol in the places where there is a space
    numbers=left,%
    frame=single,
    emph=[1]{for,end,break},emphstyle=[1]\color{red} %some words to emphasise
}}

% MATLAB environment
\lstnewenvironment{matlab}[1][]
{
\matlabstyle
\lstset{#1}
}
{}

% MATLAB for external files
\newcommand\matlabexternal[2][]{{
\matlabstyle
\lstinputlisting[#1]{#2}}}

% MATLAB for inline
\newcommand\matlabinline[1]{{\matlabstyle\lstinline!#1!}}

{% endraw %}
