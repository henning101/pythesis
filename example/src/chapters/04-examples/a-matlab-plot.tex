\section{A MATLAB Plot}
\label{sec:a-matlab-plot}
In order to generate MATLAB plots PyThesis needs to be started with the MATLAB flag:
\begin{verbatim}
python start.py [...] --matlab
\end{verbatim}
The MATLAB Python engine must be installed and MATLAB must be running. In order to share the MATLAB engine, enter the following command into the MATLAB terminal:
\begin{verbatim}
matlab.engine.shareEngine
\end{verbatim}
The following uses the \_matlab singleton, the \_templater and \_dataset to generate a MATLAB plot:  
{% subinclude '_tex/a_matlab_plot_source' %}
{% subinclude '_tex/a_matlab_plot' %}

\subsection{MATLAB Inline Evals}
The example uses templates to execute MATLAB code. It is of course also possible to execute MATLAB code directly. For example:
\begin{python}
_matlab.eval('x = [0.2 0.3 0.4];')
_matlab.eval('plot(x);')
\end{python}
For multiple lines of code you can do:
\begin{python}
name = 'My Plot'
code = f'''
    hold on;
    x = [0.2 0.3 0.4];
    plot(x);
    legend(['x']);
    title('{name}');
'''
_matlab.eval(code)
\end{python}
Note that Python f-strings use \textbf{single} curly brackets for variable replacement while Jinja strings use \textbf{double} curly brackets (this can result in a fun character escaping mess).
